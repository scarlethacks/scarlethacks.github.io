{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","_0x7f9a","_0x47aa0e","_0x1598aa","_0x142aae","_0x3ee41d","_0xa7f9","_0x39bd45","_0x31c25a","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","ScarletHacksFirebase","firebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","initialized","init","callback","signInAnonymously","then","done","user","getCurrentUser","logon","uid","catch","err","console","error","message","reject","getPrometheus","currentUser","saveSignupEmail","email","save","type","ref","push","timestamp","Date","now","3","_config","log","signupEmail","document","getElementById","signupButton","postSignupEmail","Promise","resolve","isEmail","indexOf","isEdu","signupWithEmail","classList","add","remove","vex","dialog","alert","errMessage","addEventListener","keyCode","which","./config","./database"],"mappings":"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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _0x7f9a = ['AIzaSyAqeXC738jjgG_oNBUGzPAnsCmp8qluqgk', 'scarlethacks.firebaseapp.com', 'https://scarlethacks.firebaseio.com'];(function (_0x47aa0e, _0x1598aa) {\n  var _0x3ee41d = function _0x3ee41d(_0x142aae) {\n    while (--_0x142aae) {\n      _0x47aa0e['push'](_0x47aa0e['shift']());\n    }\n  };_0x3ee41d(++_0x1598aa);\n})(_0x7f9a, 0x1dd);var _0xa7f9 = function _0xa7f9(_0x39bd45, _0x31c25a) {\n  _0x39bd45 = _0x39bd45 - 0x0;var _0x1b771e = _0x7f9a[_0x39bd45];return _0x1b771e;\n};var config = { 'apiKey': _0xa7f9('0x0'), 'authDomain': _0xa7f9('0x1'), 'databaseURL': _0xa7f9('0x2'), 'projectId': 'scarlethacks', 'storageBucket': '', 'messagingSenderId': '446391337951' };\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(config) {\n\n\tvar ScarletHacksFirebase = firebase.initializeApp(config, 'ScarletHacks Database');\n\n\tvar db = ScarletHacksFirebase.database();\n\tvar auth = ScarletHacksFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, ScarletHacksFirebase);\n\n\tvar database = {\n\n\t\tinitialized: false,\n\n\t\tinit: function init(callback) {\n\t\t\tauth.signInAnonymously().then(function (done) {\n\t\t\t\tvar user = database.getCurrentUser();\n\t\t\t\tprometheus.logon(user.uid);\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (err) {\n\t\t\t\tconsole.error(err.code, err.message);\n\t\t\t\treject(err);\n\t\t\t});\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser;\n\t\t},\n\n\t\tsaveSignupEmail: function saveSignupEmail(email) {\n\t\t\tvar uid = auth.currentUser.uid;\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'SIGNUP_EMAIL',\n\t\t\t\temail: email\n\t\t\t});\n\t\t\treturn db.ref('email-signups').push({\n\t\t\t\temail: email,\n\t\t\t\ttimestamp: Date.now(),\n\t\t\t\tuid: database.getCurrentUser().uid\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar database = (0, _database.Database)(_config.config);\n\ndatabase.init(main);\n\nfunction main(user) {\n\n\tconsole.log('Welcome to ScarletHacks.');\n\n\tvar prometheus = database.getPrometheus();\n\n\tvar signupEmail = document.getElementById('signup-email');\n\tvar signupButton = document.getElementById('signup-submit');\n\n\tvar postSignupEmail = function postSignupEmail(email) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tconsole.log('Email: ' + email);\n\t\t\tif (email) {\n\t\t\t\tvar isEmail = email.indexOf('@') > -1;\n\t\t\t\tvar isEdu = email.indexOf('.edu') > -1;\n\t\t\t\tif (isEmail && isEdu) {\n\t\t\t\t\tdatabase.saveSignupEmail(email).then(resolve).catch(reject);\n\t\t\t\t} else {\n\t\t\t\t\treject('Please enter a valid .edu email address.');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treject('Please enter a valid .edu email address.');\n\t\t\t}\n\t\t});\n\t};\n\n\tvar signupWithEmail = function signupWithEmail() {\n\t\tsignupButton.classList.add('is-loading');\n\t\tvar email = signupEmail.value;\n\t\tpostSignupEmail(email).then(function (done) {\n\t\t\tsignupButton.classList.remove('is-loading');\n\t\t\tvex.dialog.alert('We\\'ll let you know when ScarletHacks applications are out!');\n\t\t}).catch(function (err) {\n\t\t\tsignupButton.classList.remove('is-loading');\n\t\t\tvar errMessage = err + '';\n\t\t\tvex.dialog.alert(errMessage);\n\t\t});\n\t};\n\n\tsignupEmail.addEventListener('keypress', function (e) {\n\t\tvar keyCode = e.keyCode || e.which;\n\t\tif (keyCode == 13) {\n\t\t\tsignupWithEmail();\n\t\t}\n\t});\n\n\tsignupButton.addEventListener('click', function (e) {\n\t\tsignupWithEmail();\n\t});\n}\n\n},{\"./config\":1,\"./database\":2}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBLElBQUksVUFBUSxDQUFDLHlDQUFELEVBQTJDLDhCQUEzQyxFQUEwRSxxQ0FBMUUsQ0FBWixDQUE4SCxXQUFTLFNBQVQsRUFBbUIsU0FBbkIsRUFBNkI7QUFBQyxNQUFJLFlBQVUsU0FBVixTQUFVLENBQVMsU0FBVCxFQUFtQjtBQUFDLFdBQU0sRUFBRSxTQUFSLEVBQWtCO0FBQUMsZ0JBQVUsTUFBVixFQUFrQixVQUFVLE9BQVYsR0FBbEI7QUFBeUM7QUFBQyxHQUEvRixDQUFnRyxVQUFVLEVBQUUsU0FBWjtBQUF3QixDQUF0SixFQUF1SixPQUF2SixFQUErSixLQUEvSixDQUFELENBQXdLLElBQUksVUFBUSxTQUFSLE9BQVEsQ0FBUyxTQUFULEVBQW1CLFNBQW5CLEVBQTZCO0FBQUMsY0FBVSxZQUFVLEdBQXBCLENBQXdCLElBQUksWUFBVSxRQUFRLFNBQVIsQ0FBZCxDQUFpQyxPQUFPLFNBQVA7QUFBa0IsQ0FBckgsQ0FBc0gsSUFBSSxTQUFPLEVBQUMsVUFBUyxRQUFRLEtBQVIsQ0FBVixFQUF5QixjQUFhLFFBQVEsS0FBUixDQUF0QyxFQUFxRCxlQUFjLFFBQVEsS0FBUixDQUFuRSxFQUFrRixhQUFZLGNBQTlGLEVBQTZHLGlCQUFnQixFQUE3SCxFQUFnSSxxQkFBb0IsY0FBcEosRUFBWDtRQUNuWixNLEdBQUEsTTs7Ozs7Ozs7QUNEUixJQUFJLFdBQVcsU0FBWCxRQUFXLENBQUMsTUFBRCxFQUFZOztBQUUxQixLQUFJLHVCQUF1QixTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0IsdUJBQS9CLENBQTNCOztBQUVBLEtBQUksS0FBSyxxQkFBcUIsUUFBckIsRUFBVDtBQUNBLEtBQUksT0FBTyxxQkFBcUIsSUFB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QXZCLENBQThCLFlBQTlCO0FBQ0EsT0FBSSxhQUFhLE1BQU0sRUFBdkI7QUFDQSxPQUFJLE1BQUosQ0FBVyxLQUFYLENBQWlCLFVBQWpCO0FBQ0EsR0FQRDtBQVFBLEVBWEQ7O0FBYUEsYUFBWSxnQkFBWixDQUE2QixVQUE3QixFQUF5QyxVQUFDLENBQUQsRUFBTztBQUMvQyxNQUFJLFVBQVUsRUFBRSxPQUFGLElBQWEsRUFBRSxLQUE3QjtBQUNBLE1BQUksV0FBVyxFQUFmLEVBQW1CO0FBQ2xCO0FBQ0E7QUFDRCxFQUxEOztBQU9BLGNBQWEsZ0JBQWIsQ0FBOEIsT0FBOUIsRUFBdUMsVUFBQyxDQUFELEVBQU87QUFDN0M7QUFDQSxFQUZEO0FBSUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIF8weDdmOWE9WydBSXphU3lBcWVYQzczOGpqZ0dfb05CVUd6UEFuc0NtcDhxbHVxZ2snLCdzY2FybGV0aGFja3MuZmlyZWJhc2VhcHAuY29tJywnaHR0cHM6Ly9zY2FybGV0aGFja3MuZmlyZWJhc2Vpby5jb20nXTsoZnVuY3Rpb24oXzB4NDdhYTBlLF8weDE1OThhYSl7dmFyIF8weDNlZTQxZD1mdW5jdGlvbihfMHgxNDJhYWUpe3doaWxlKC0tXzB4MTQyYWFlKXtfMHg0N2FhMGVbJ3B1c2gnXShfMHg0N2FhMGVbJ3NoaWZ0J10oKSk7fX07XzB4M2VlNDFkKCsrXzB4MTU5OGFhKTt9KF8weDdmOWEsMHgxZGQpKTt2YXIgXzB4YTdmOT1mdW5jdGlvbihfMHgzOWJkNDUsXzB4MzFjMjVhKXtfMHgzOWJkNDU9XzB4MzliZDQ1LTB4MDt2YXIgXzB4MWI3NzFlPV8weDdmOWFbXzB4MzliZDQ1XTtyZXR1cm4gXzB4MWI3NzFlO307bGV0IGNvbmZpZz17J2FwaUtleSc6XzB4YTdmOSgnMHgwJyksJ2F1dGhEb21haW4nOl8weGE3ZjkoJzB4MScpLCdkYXRhYmFzZVVSTCc6XzB4YTdmOSgnMHgyJyksJ3Byb2plY3RJZCc6J3NjYXJsZXRoYWNrcycsJ3N0b3JhZ2VCdWNrZXQnOicnLCdtZXNzYWdpbmdTZW5kZXJJZCc6JzQ0NjM5MTMzNzk1MSd9O1xuZXhwb3J0IHtjb25maWd9OyIsImxldCBEYXRhYmFzZSA9IChjb25maWcpID0+IHtcblxuXHRsZXQgU2NhcmxldEhhY2tzRmlyZWJhc2UgPSBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGNvbmZpZywgJ1NjYXJsZXRIYWNrcyBEYXRhYmFzZScpO1xuXHRcblx0bGV0IGRiID0gU2NhcmxldEhhY2tzRmlyZWJhc2UuZGF0YWJhc2UoKTtcblx0bGV0IGF1dGggPSBTY2FybGV0SGFja3NGaXJlYmFzZS5hdXRoKCk7XG5cdFx0Y29uZmlnLmxvY2FsaG9zdCA9IHRydWU7XG5cdFx0Y29uZmlnLm5vU2NyZWVuc2hvdHMgPSB0cnVlO1xuXHRsZXQgcHJvbWV0aGV1cyA9IFByb21ldGhldXMoY29uZmlnLCBTY2FybGV0SGFja3NGaXJlYmFzZSk7XG5cblx0bGV0IGRhdGFiYXNlID0ge1xuXG5cdFx0aW5pdGlhbGl6ZWQ6IGZhbHNlLFxuXHRcdFxuXHRcdGluaXQ6IChjYWxsYmFjaykgPT4ge1xuXHRcdFx0YXV0aC5zaWduSW5Bbm9ueW1vdXNseSgpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0bGV0IHVzZXIgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpO1xuXHRcdFx0XHRwcm9tZXRoZXVzLmxvZ29uKHVzZXIudWlkKTtcblx0XHRcdFx0Y2FsbGJhY2sodXNlcik7XG5cdFx0XHR9KS5jYXRjaCgoZXJyKSA9PiB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyLmNvZGUsIGVyci5tZXNzYWdlKTtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0UHJvbWV0aGV1czogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHByb21ldGhldXM7XG5cdFx0fSxcblxuXHRcdGdldEN1cnJlbnRVc2VyOiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXV0aC5jdXJyZW50VXNlcjtcblx0XHR9LFxuXG5cdFx0c2F2ZVNpZ251cEVtYWlsOiAoZW1haWwpID0+IHtcblx0XHRcdGxldCB1aWQgPSBhdXRoLmN1cnJlbnRVc2VyLnVpZDtcblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdTSUdOVVBfRU1BSUwnLFxuXHRcdFx0XHRlbWFpbDogZW1haWxcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgZW1haWwtc2lnbnVwc2ApLnB1c2goe1xuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcblx0XHRcdFx0dWlkOiBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdH1cblxuXHRyZXR1cm4gZGF0YWJhc2U7XG59XG5cbmV4cG9ydCB7RGF0YWJhc2V9OyIsImltcG9ydCB7Y29uZmlnfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQge0RhdGFiYXNlfSBmcm9tICcuL2RhdGFiYXNlJztcblxubGV0IGRhdGFiYXNlID0gRGF0YWJhc2UoY29uZmlnKTtcblxuZGF0YWJhc2UuaW5pdChtYWluKTtcblxuZnVuY3Rpb24gbWFpbih1c2VyKSB7XG5cblx0Y29uc29sZS5sb2coJ1dlbGNvbWUgdG8gU2NhcmxldEhhY2tzLicpO1xuXG5cdGxldCBwcm9tZXRoZXVzID0gZGF0YWJhc2UuZ2V0UHJvbWV0aGV1cygpO1xuXG5cdGxldCBzaWdudXBFbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWdudXAtZW1haWwnKTtcblx0bGV0IHNpZ251cEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWdudXAtc3VibWl0Jyk7XG5cblx0bGV0IHBvc3RTaWdudXBFbWFpbCA9IChlbWFpbCkgPT4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZyhgRW1haWw6ICR7ZW1haWx9YCk7XG5cdFx0XHRpZiAoZW1haWwpIHtcblx0XHRcdFx0bGV0IGlzRW1haWwgPSBlbWFpbC5pbmRleE9mKCdAJykgPiAtMTtcblx0XHRcdFx0bGV0IGlzRWR1ID0gZW1haWwuaW5kZXhPZignLmVkdScpID4gLTE7XG5cdFx0XHRcdGlmIChpc0VtYWlsICYmIGlzRWR1KSB7XG5cdFx0XHRcdFx0ZGF0YWJhc2Uuc2F2ZVNpZ251cEVtYWlsKGVtYWlsKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVqZWN0KCdQbGVhc2UgZW50ZXIgYSB2YWxpZCAuZWR1IGVtYWlsIGFkZHJlc3MuJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlamVjdCgnUGxlYXNlIGVudGVyIGEgdmFsaWQgLmVkdSBlbWFpbCBhZGRyZXNzLicpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0bGV0IHNpZ251cFdpdGhFbWFpbCA9ICgpID0+IHtcblx0XHRzaWdudXBCdXR0b24uY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xuXHRcdGxldCBlbWFpbCA9IHNpZ251cEVtYWlsLnZhbHVlO1xuXHRcdHBvc3RTaWdudXBFbWFpbChlbWFpbCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0c2lnbnVwQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvYWRpbmcnKTtcblx0XHRcdHZleC5kaWFsb2cuYWxlcnQoYFdlJ2xsIGxldCB5b3Uga25vdyB3aGVuIFNjYXJsZXRIYWNrcyBhcHBsaWNhdGlvbnMgYXJlIG91dCFgKTtcblx0XHR9KS5jYXRjaCgoZXJyKSA9PiB7XG5cdFx0XHRzaWdudXBCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuXHRcdFx0bGV0IGVyck1lc3NhZ2UgPSBlcnIgKyAnJztcblx0XHRcdHZleC5kaWFsb2cuYWxlcnQoZXJyTWVzc2FnZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRzaWdudXBFbWFpbC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG5cdFx0bGV0IGtleUNvZGUgPSBlLmtleUNvZGUgfHwgZS53aGljaDtcblx0XHRpZiAoa2V5Q29kZSA9PSAxMykge1xuXHRcdFx0c2lnbnVwV2l0aEVtYWlsKCk7XG5cdFx0fVxuXHR9KTtcblxuXHRzaWdudXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdHNpZ251cFdpdGhFbWFpbCgpO1xuXHR9KTtcblxufSJdfQ==\n"]}